<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ember Sigil RPG Prototype</title>
  <link rel="stylesheet" href="./game.css">
</head>
<body>
  <div id="loading" class="loading">Loading world data...</div>
  <div id="app" class="app hidden" aria-live="polite">
    <div class="layout">
      <aside class="sidebar" aria-label="Hero summary">
        <header class="player-header">
          <h1>Ember Sigil</h1>
          <p class="tagline">A data-driven browser RPG prototype</p>
        </header>
        <section class="player-summary">
          <div class="summary-field">
            <span class="label">Hero</span>
            <span class="value" id="playerName">-</span>
          </div>
          <div class="summary-field">
            <span class="label">Class</span>
            <span class="value" id="playerClass">-</span>
          </div>
          <div class="summary-field">
            <span class="label">Level</span>
            <span class="value" id="playerLevel">1</span>
          </div>
          <div class="summary-field">
            <span class="label">Experience</span>
            <span class="value" id="playerXp">0 / 0</span>
          </div>
          <div class="resource-row" aria-live="polite">
            <span class="label">Health</span>
            <div class="resource-bar">
              <div id="healthBar" class="resource-fill"></div>
            </div>
            <span class="value" id="healthValue">0 / 0</span>
          </div>
          <div class="resource-row" aria-live="polite">
            <span class="label">Mana</span>
            <div class="resource-bar">
              <div id="manaBar" class="resource-fill mana"></div>
            </div>
            <span class="value" id="manaValue">0 / 0</span>
          </div>
          <div class="summary-field">
            <span class="label">Gold</span>
            <span class="value" id="playerGold">0</span>
          </div>
          <div class="summary-field">
            <span class="label">Day</span>
            <span class="value" id="adventureDay">1</span>
          </div>
          <div class="summary-field">
            <span class="label">Camp Supplies</span>
            <span class="value" id="campSuppliesValue">0</span>
          </div>
        </section>
        <nav id="screenNav" class="sidebar-nav" aria-label="Game screens">
          <button class="active" data-screen="character" type="button">Character</button>
          <button data-screen="travel" type="button">Travel</button>
          <button data-screen="trade" type="button">Trade</button>
          <button data-screen="town" type="button">Town</button>
          <button data-screen="quests" type="button">Quest Log</button>
        </nav>
        <div class="sidebar-actions">
          <button id="inventoryToggle" type="button">Inventory</button>
          <button id="restButton" type="button">Rest at Camp</button>
        </div>
      </aside>
      <main class="main-area">
        <section id="screen-character" class="main-screen active" aria-labelledby="characterTitle">
          <header class="screen-header">
            <h2 id="characterTitle">Character</h2>
            <p class="screen-subtitle">Attributes, abilities, and equipment.</p>
          </header>
          <div class="screen-grid">
            <section class="panel">
              <h3>Attributes</h3>
              <ul id="playerStats"></ul>
            </section>
            <section class="panel">
              <h3>Abilities</h3>
              <ul id="playerAbilities"></ul>
            </section>
            <section class="panel">
              <h3>Equipment</h3>
              <ul id="playerEquipment"></ul>
            </section>
          </div>
          <section class="panel talent-panel">
            <header class="panel-header">
              <h3>Talents</h3>
              <p class="panel-subtitle">Spend talent points to specialize your hero.</p>
            </header>
            <div class="talent-summary">
              <div class="talent-summary__item">
                <span class="label">Discipline</span>
                <span class="value" id="talentTreeName">-</span>
              </div>
              <div class="talent-summary__item">
                <span class="label">Points Available</span>
                <span class="value" id="talentPoints">0</span>
              </div>
            </div>
            <div id="talentTree" class="talent-tree"></div>
            <div id="talentFeedback" class="screen-feedback" role="status" aria-live="polite">
              Spend talent points to unlock new strengths for your hero.
            </div>
          </section>
          <section class="panel professions-panel">
            <header class="panel-header">
              <h3>Professions</h3>
              <p class="panel-subtitle">Manage trained disciplines and crafting recipes.</p>
            </header>
            <ul id="playerProfessions" class="tag-list"></ul>
            <div class="form-grid">
              <label for="professionSelect">Active Profession</label>
              <select id="professionSelect"></select>
              <p id="professionDescription" class="description"></p>
              <label for="recipeSelect">Recipes</label>
              <select id="recipeSelect"></select>
            </div>
            <div class="button-row">
              <button id="gatherButton" type="button">Gather Resources</button>
              <button id="craftButton" type="button">Craft Item</button>
            </div>
            <div class="profession-details">
              <section>
                <h4>Available Gatherables</h4>
                <ul id="professionGatherables" class="bullet-list"></ul>
              </section>
              <section>
                <h4>Crafting Recipes</h4>
                <div id="professionRecipes" class="list-grid"></div>
              </section>
            </div>
            <div id="professionFeedback" class="screen-feedback" role="status" aria-live="polite">
              Work your trade to gather resources or craft items.
            </div>
          </section>
        </section>

        <section id="screen-travel" class="main-screen" aria-labelledby="travelTitle">
          <header class="screen-header">
            <h2 id="travelTitle">Travel</h2>
            <p class="screen-subtitle">Chart a course and resolve what happens along the road.</p>
          </header>
          <div class="screen-grid travel-grid">
            <section class="panel">
              <p class="current-zone"><strong>Current Location:</strong> <span id="travelCurrentZone">-</span></p>
              <label for="travelDestinationSelect">Destination</label>
              <select id="travelDestinationSelect"></select>
              <p id="travelDestinationDescription" class="description"></p>
              <div class="focus-group" role="group" aria-label="Travel focus">
                <span class="focus-label">Travel Focus</span>
                <div class="focus-options" id="travelFocusOptions">
                  <button type="button" data-focus="balanced" class="active">Balanced</button>
                  <button type="button" data-focus="gathering">Gathering</button>
                  <button type="button" data-focus="combat">Hunting</button>
                </div>
              </div>
              <div class="button-row">
                <button id="beginTravelButton" type="button">Begin Journey</button>
                <button id="travelAdvanceButton" type="button">Advance Turn</button>
                <button id="cancelTravelButton" type="button">Cancel Journey</button>
              </div>
              <div id="travelStatus" class="travel-status"></div>
              <div id="travelFeedback" class="screen-feedback" role="status" aria-live="polite">
                Plan your journeys and respond to what unfolds on the road.
              </div>
            </section>
            <section class="panel">
              <h3>Route Notes</h3>
              <ul id="travelDestinationMeta" class="bullet-list"></ul>
              <h3>Highlights</h3>
              <ul id="travelDestinationHighlights" class="bullet-list"></ul>
              <h3>Threat Assessment</h3>
              <ul id="travelDestinationThreats" class="bullet-list"></ul>
              <div class="progress-container">
                <span>Journey Progress</span>
                <div class="progress-bar">
                  <div id="travelProgressBar" class="progress-fill"></div>
                </div>
              </div>
              <h3>Recent Travel Events</h3>
              <div id="travelEventLog" class="log-entries"></div>
            </section>
          </div>
        </section>

        <section id="screen-trade" class="main-screen" aria-labelledby="tradeTitle">
          <header class="screen-header">
            <h2 id="tradeTitle">Trade</h2>
            <p class="screen-subtitle">Buy and sell goods across the realm.</p>
          </header>
          <div class="screen-grid">
            <section class="panel">
              <p class="current-zone"><strong>Current Market:</strong> <span id="tradingCurrentZone">-</span></p>
              <label for="merchantSelect">Merchant</label>
              <select id="merchantSelect"></select>
              <div class="button-row">
                <button id="refreshMerchantButton" type="button">Refresh Stock</button>
              </div>
              <div id="merchantInfo" class="details-card"></div>
              <div id="tradeFeedback" class="screen-feedback" role="status" aria-live="polite">
                Choose goods to buy or sell with the merchants.
              </div>
            </section>
            <section class="panel">
              <h3>Shop Inventory</h3>
              <div id="merchantInventory" class="list-grid"></div>
              <h3>Sellable Goods</h3>
              <div id="sellInventory" class="list-grid"></div>
            </section>
          </div>
        </section>

        <section id="screen-town" class="main-screen" aria-labelledby="townTitle">
          <header class="screen-header">
            <h2 id="townTitle">Town</h2>
            <p class="screen-subtitle">Meet locals, gather rumours, and patrol the streets for opportunity.</p>
          </header>
          <div class="screen-grid">
            <section class="panel">
              <p class="current-zone"><strong>Current Settlement:</strong> <span id="townCurrentZone">-</span></p>
              <label for="npcSelect">Residents</label>
              <select id="npcSelect"></select>
              <div class="button-row">
                <button id="talkToNpcButton" type="button">Talk</button>
                <button id="requestQuestButton" type="button">Request Quest</button>
                <button id="roamTownButton" type="button">Roam the Streets</button>
              </div>
            </section>
            <section class="panel">
              <h3>Resident Details</h3>
              <div id="npcDetails" class="details-card"></div>
              <div id="townFeedback" class="screen-feedback" role="status" aria-live="polite">
                Speak with residents, patrol the streets, or request help.
              </div>
            </section>
          </div>
        </section>

        <section id="screen-quests" class="main-screen" aria-labelledby="questsTitle">
          <header class="screen-header">
            <h2 id="questsTitle">Quest Log</h2>
            <p class="screen-subtitle">Track your missions and review the adventure log.</p>
          </header>
          <div class="screen-grid quest-grid">
            <section class="panel">
              <div id="questLogContent"></div>
            </section>
            <section class="panel">
              <h3>Adventure Log</h3>
              <div id="logEntries" class="log-entries"></div>
            </section>
          </div>
        </section>
      </main>
    </div>
  </div>

  <div id="combatScreen" class="combat-screen" aria-live="polite" aria-hidden="true">
    <div class="combat-container">
      <header class="combat-header">
        <h2>Combat Encounter</h2>
        <p class="combat-subtitle">Resolve the clash before moving on.</p>
      </header>
      <div class="combat-content">
        <div class="combat-column">
          <p class="current-zone"><strong>Current Region:</strong> <span id="combatCurrentZone">-</span></p>
          <div id="combatActions" class="combat-actions">
            <button id="combatStrikeButton" type="button">Strike</button>
            <button id="combatAbilityButton" type="button">Ability</button>
            <button id="combatGuardButton" type="button">Guard</button>
            <button id="combatFleeButton" type="button">Attempt Flee</button>
          </div>
        </div>
        <div class="combat-column">
          <h3>Enemy Intel</h3>
          <div id="enemyDetails" class="details-card"></div>
          <h3>Battle Status</h3>
          <div id="combatStatus" class="details-card"></div>
          <h3>Battle Log</h3>
          <div class="details-card combat-log">
            <div id="combatLog" class="log-entries"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="newGameModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="newGameTitle">
    <div class="modal-content">
      <header>
        <h2 id="newGameTitle">Create Your Hero</h2>
      </header>
      <form id="newGameForm">
        <div class="form-field">
          <label for="playerNameInput">Hero Name</label>
          <input id="playerNameInput" name="playerName" type="text" required maxlength="24" placeholder="Enter a name" autocomplete="off">
        </div>
        <div class="form-field">
          <label for="classSelect">Class</label>
          <select id="classSelect" name="classId" required></select>
        </div>
        <div id="classDetails" class="class-details" aria-live="polite"></div>
        <div class="modal-actions">
          <button id="startGameButton" type="submit">Begin Adventure</button>
        </div>
      </form>
    </div>
  </div>

  <div id="inventoryPanel" class="overlay-panel" aria-hidden="true">
    <div class="overlay-content">
      <header>
        <h2>Inventory</h2>
        <button class="close-button" type="button" data-close="inventoryPanel" aria-label="Close inventory">×</button>
      </header>
      <div id="inventoryList" class="list-grid"></div>
    </div>
  </div>

  <template id="inventoryItemTemplate">
    <article class="card">
      <header class="card-header"></header>
      <div class="card-body"></div>
      <div class="card-footer"></div>
    </article>
  </template>

  <template id="recipeTemplate">
    <article class="card">
      <header class="card-header"></header>
      <div class="card-body"></div>
      <div class="card-footer"></div>
    </article>
  </template>

  <script src="./game.js"></script>
</body>
</html>
